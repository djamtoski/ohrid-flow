# Setup Guide

## Initial Setup

1. **Install dependencies:**
```bash
npm install
```

2. **Configure environment:**
   - Copy `src/environments/environment.ts` and update with your API URL
   - Add Firebase configuration for customer authentication

3. **Build the app:**
```bash
npm run build
```

## Adding Mobile Platforms

### Android Setup

1. **Add Android platform:**
```bash
npm run cap:add:android
```

2. **Sync Capacitor:**
```bash
npm run cap:sync
```

3. **Open in Android Studio:**
```bash
npm run cap:open:android
```

4. **Configure Android permissions:**
   - Open `android/app/src/main/AndroidManifest.xml`
   - Ensure these permissions are present:
   ```xml
   <uses-permission android:name="android.permission.CAMERA" />
   <uses-permission android:name="android.permission.INTERNET" />
   ```

5. **Build and run:**
   - In Android Studio, click "Run" or press Shift+F10
   - Select a device/emulator
   - The app will build and launch

### iOS Setup (macOS only)

1. **Add iOS platform:**
```bash
npm run cap:add:ios
```

2. **Sync Capacitor:**
```bash
npm run cap:sync
```

3. **Open in Xcode:**
```bash
npm run cap:open:ios
```

4. **Configure iOS permissions:**
   - Open `ios/App/App/Info.plist`
   - Add camera usage description:
   ```xml
   <key>NSCameraUsageDescription</key>
   <string>We need access to your camera to scan QR codes</string>
   ```

5. **Configure signing:**
   - Select the project in Xcode
   - Go to "Signing & Capabilities"
   - Select your development team
   - Xcode will automatically manage provisioning

6. **Build and run:**
   - Select a simulator or device
   - Click "Run" or press Cmd+R

## Building for Production

### Android

1. Build production web app:
```bash
npm run build:prod
```

2. Sync Capacitor:
```bash
npm run cap:sync
```

3. Open Android Studio:
```bash
npm run cap:open:android
```

4. In Android Studio:
   - Go to Build → Generate Signed Bundle / APK
   - Follow the wizard to create a signed APK or AAB
   - Upload to Google Play Console

### iOS

1. Build production web app:
```bash
npm run build:prod
```

2. Sync Capacitor:
```bash
npm run cap:sync
```

3. Open Xcode:
```bash
npm run cap:open:ios
```

4. In Xcode:
   - Select "Any iOS Device" as target
   - Go to Product → Archive
   - Follow the wizard to upload to App Store Connect or export for TestFlight

## Troubleshooting

### Android Build Issues

- **Gradle sync failed:** Run `cd android && ./gradlew clean` then sync again
- **SDK not found:** Install required SDK versions in Android Studio SDK Manager
- **Permission denied:** Check `AndroidManifest.xml` has required permissions

### iOS Build Issues

- **Code signing error:** Select your development team in Xcode signing settings
- **Pod install failed:** Run `cd ios/App && pod install` manually
- **Simulator not launching:** Check Xcode → Preferences → Components for installed simulators

### QR Scanner Issues

- **Camera not working:** Ensure permissions are granted in device settings
- **Scanner not initializing:** Check that ZXing module is properly imported
- **Build errors:** Ensure all Capacitor plugins are synced with `npm run cap:sync`

## Development Workflow

1. Make code changes
2. Test in browser: `npm start`
3. Build: `npm run build`
4. Sync: `npm run cap:sync`
5. Test on device: `npm run cap:open:android` or `npm run cap:open:ios`

## Notes

- Always run `npm run cap:sync` after installing new npm packages that include Capacitor plugins
- The `www` folder is generated by `ng build` and should not be edited manually
- Native code changes should be made in `android/` or `ios/` folders, but be careful as they may be overwritten by sync

